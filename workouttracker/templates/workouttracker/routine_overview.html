{% extends 'workouttracker/base.html' %}
{% load static %}
{% load tags %}
{% load humanize %}

{% block content_header %}
<h1>Routines</h1>
<ol class="breadcrumb">
  <li class="breadcrumb-item"><a href="/">Home</a></li>
  <li class="breadcrumb-item active">Routines</li>
</ol>
{% endblock %}

{% block content %}
<div class="card">
  <div class="card-header with-border">
    <h3 class="card-title">Quick Start</h3>
  </div>
  <div class="card-footer">
    <a class="btn btn-primary" href="{% url 'routine_create' %}">Create New Routine</a>
  </div>
</div>
<!-- <div>
{{routinesList}}
</div> -->
{% for routine in routinesList %}
<div class="card">
  <div class="card-header with-border">
    <h3 class="card-title">{{ routine.name }}</h3>
    <a class="btn btn-default" href="{% url 'routine_update' routine.id %}">Edit</a>
  </div>
  <div class="card-body">
    {% for exercise in routine.exercises %}
      <small>{{ exercise }}<br/></small>
    {% endfor %}
    </div>
    <div class="card-footer text-center">
      </div>
    </div>
{% endfor %}
{% for category in categories %}
<div class="card">
  <div class="card-header">
    <h3 class="card-title">{{category}}</h3>
  </div>
  <div class="card-body">
    <table class="table">
      <tr>
        <th>Title</th>
        <th>Date</th>
        <th>Amount</th>
      </tr>
        {% for exercise in splits %}
        <tr>
          <td><a href="{{ exercise.get_absolute_url }}">{{ exercise.title }}</a></td>
          <td>{{ exercise.date }}</td>
          <td>{{ exercise.amount }}</td>
        </tr>
        {% endfor %}
      </table>
    </div>
    <div class="card-footer">
      <a class="btn btn-primary" href="{% url 'transactions' %}?category={{ category.id }}" >Go to workout</a>
    </div>
  </div>
  {% endfor %}
{% endblock %}

{% block scripts %}
<script type="text/javascript">
  // console.log('{{routine}}')

  $('select').change(function() {
    $( "select option:selected" ).each(function() {
      window.location.href = "{{ request.path }}?page=" + $(this).val();
    });
  })
</script>
{% endblock %}
